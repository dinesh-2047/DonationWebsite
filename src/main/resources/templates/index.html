<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Jagannath Donation — Give Clean Water</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <script src="https://js.stripe.com/v3/"></script>

    <style>
        /* ========== Base ========== */
        :root{
          --bg:#0b1220;
          --card:#0f172a;
          --muted:#0d1324;
          --text:#e6edf6;
          --text-dim:#9fb0c3;
          --brand:#3abef9;
          --brand-strong:#0ea5e9;
          --accent:#22c55e;
          --warn:#f59e0b;
          --shadow:0 10px 25px rgba(0,0,0,.35);
          --radius:1.25rem;
        }

        *{box-sizing:border-box}
        html,body{height:100%}
        body{
          margin:0;
          font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
          color:var(--text);
          background:linear-gradient(180deg,#071022, #0a1426 40%, #0d192e);
          line-height:1.6;
          -webkit-font-smoothing:antialiased;
          -moz-osx-font-smoothing:grayscale;
        }

        img{max-width:100%;display:block;border-radius:calc(var(--radius) - .25rem)}

        /* Utility */
        .container{width:min(1120px, 92%); margin-inline:auto}
        .section{padding:4rem 0}
        .section--muted{background:linear-gradient(180deg,#0a1225,#0a1428)}
        .section-title{text-align:center;font-size:2rem;margin:0 0 2rem 0}
        .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:1.25rem}
        .two-col{display:grid;grid-template-columns:1.2fr .8fr;gap:2rem;align-items:center}
        .cta-inner{display:flex;flex-direction:column;align-items:center;gap:1rem}
        .btn{display:inline-block;padding:.9rem 1.2rem;border-radius:999px;text-decoration:none;border:1px solid transparent;font-weight:700}
        .btn--primary{background:var(--brand);color:#001827;box-shadow:var(--shadow)}
        .btn--primary:hover{background:var(--brand-strong)}
        .btn--ghost{border-color:#2a3a59;color:var(--text)}
        .btn--ghost:hover{border-color:var(--brand);color:var(--brand)}
        .btn--lg{padding:1.05rem 1.4rem;font-size:1.05rem}
        .link{color:var(--brand);text-decoration:none;font-weight:600}
        .link:hover{text-decoration:underline}
        .sr-only{position:absolute;clip:rect(0 0 0 0);clip-path:inset(50%);width:1px;height:1px;margin:-1px;overflow:hidden;padding:0;border:0}

        /* Header */
        .site-header{
          position:sticky; top:0; z-index:50;
          backdrop-filter:saturate(140%) blur(8px);
          background:rgba(6, 12, 25, .65);
          border-bottom:1px solid rgba(255,255,255,.06);
        }
        .header-inner{display:flex;align-items:center;justify-content:space-between;padding:.6rem 0}
        .brand{display:inline-flex;align-items:center;gap:.6rem;color:var(--text);text-decoration:none;font-weight:800;font-size:1.15rem}
        .brand-mark{width:34px;height:34px;fill:var(--brand)}
        .brand-text{letter-spacing:.3px}
        .site-nav ul{display:flex;gap:.8rem;list-style:none;margin:0;padding:0;align-items:center}
        .site-nav a{color:var(--text);text-decoration:none;padding:.5rem .75rem;border-radius:999px}
        .site-nav a:hover{background:rgba(255,255,255,.06)}
        .nav-toggle{display:none;border:0;background:transparent;padding:.25rem;cursor:pointer}
        .nav-toggle .bar{width:22px;height:2px;background:#c9d7e8;margin:.25rem 0;border-radius:2px}

        /* Hero */
        .hero{padding:4.5rem 0 3rem;background:radial-gradient(1200px 600px at 10% -10%, rgba(58,190,249,.25), transparent 60%)}
        .hero-inner{display:grid;grid-template-columns:1.2fr .8fr;gap:2rem;align-items:center}
        .hero-text h1{font-size:2.6rem;line-height:1.15;margin:.25rem 0 1rem}
        .hero-text p{color:var(--text-dim);max-width:60ch}
        .hero-card{
          background:linear-gradient(180deg,#0f1a32,#0b152c);
          border:1px solid rgba(255,255,255,.06);
          border-radius:var(--radius);
          padding:1.25rem;
          box-shadow:var(--shadow);
        }
        .hero-badge{
          display:inline-block;
          background:rgba(34,197,94,.15);
          color:#a7f3d0;
          padding:.25rem .5rem;border-radius:999px;margin-bottom:.75rem;font-weight:700;font-size:.85rem
        }
        .hero-card-title{margin:.25rem 0 1rem;color:#cfe3ff}
        .hero-points{margin:0;padding-left:1rem;color:#c4d6ee}
        .hero-points li{margin:.25rem 0}

        /* Mission */
        .media-card{
          border:1px solid rgba(255,255,255,.06);
          border-radius:var(--radius);
          padding:.5rem;
          background:linear-gradient(180deg,#0e1a31,#0d1427);
          box-shadow:var(--shadow);
        }

        /* Cards */
        .card{
          background:linear-gradient(180deg,#0f1a32,#0c162b);
          border:1px solid rgba(255,255,255,.06);
          border-radius:var(--radius);
          padding:1.25rem; box-shadow:var(--shadow);
        }
        .card h3{margin-top:.25rem}

        /* Stats */
        .stats{display:grid;grid-template-columns:repeat(3,1fr);gap:1.25rem}
        .stat{background:linear-gradient(180deg,#0f1a32,#0c162b);border:1px solid rgba(255,255,255,.06);border-radius:var(--radius);padding:1.25rem;text-align:center;box-shadow:var(--shadow)}
        .stat-number{font-size:2.25rem;font-weight:800}
        .stat-label{color:var(--text-dim)}

        /* Stories */
        .story{display:flex;flex-direction:column;background:linear-gradient(180deg,#0f1a32,#0c162b);border:1px solid rgba(255,255,255,.06);border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow)}
        .story-body{padding:1rem}

        /* CTA */
        .cta{background:radial-gradient(700px 300px at 80% 10%, rgba(34,197,94,.25), transparent 60%)}
        .cta h2{margin:0 0 1rem 0;text-align:center}

        /* Footer */
        .site-footer{border-top:1px solid rgba(255,255,255,.06);padding:1.5rem 0;background:linear-gradient(180deg,#0a1426,#0a1428)}
        .footer-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:1.25rem}
        .footer-grid h4{margin:.25rem 0 .5rem}
        .footer-grid ul{list-style:none;margin:0;padding:0}
        .footer-grid a{color:#cfe3ff;text-decoration:none}
        .footer-grid a:hover{text-decoration:underline}
        .footer-bottom{display:flex;align-items:center;justify-content:space-between;gap:1rem}

        /* Donate */
        .donate-hero{
          padding:3.5rem 0 1rem;
          background:radial-gradient(1200px 600px at 10% -10%, rgba(58,190,249,.25), transparent 60%);
        }
        .donate-grid{display:grid;grid-template-columns:1fr .8fr;gap:2rem}
        .donation-form{
          background:linear-gradient(180deg,#0f1a32,#0c162b);
          border:1px solid rgba(255,255,255,.08);
          border-radius:var(--radius);
          padding:1.25rem;
          box-shadow:var(--shadow);
        }
        .donation-form fieldset{border:0;margin:0 0 1rem 0;padding:0}
        .donation-form legend{font-weight:800;margin-bottom:.5rem}
        .amount-options{display:grid;grid-template-columns:repeat(4,1fr);gap:.5rem;margin:.5rem 0 1rem}
        .amount-options input{display:none}
        .amount-options label{
          display:block;text-align:center;padding:.7rem;border-radius:999px;border:1px solid #294064;cursor:pointer;
          background:#0b152a;
        }
        .amount-options input:checked + label{border-color:var(--brand);box-shadow:0 0 0 2px rgba(58,190,249,.2) inset}
        .custom-amount input{width:100%;margin-top:.25rem;padding:.7rem;border-radius:.75rem;border:1px solid #294064;background:#0b152a;color:var(--text)}
        .donor-info label{display:block;margin:.5rem 0}
        .donor-info input{width:100%;padding:.7rem;border-radius:.75rem;border:1px solid #294064;background:#0b152a;color:var(--text)}
        .payment-methods .radio{display:flex;align-items:center;gap:.5rem;margin:.4rem 0}
        .checkbox{display:flex;align-items:center;gap:.5rem;margin:1rem 0}
        .form-message{margin-top:.5rem}
        .donate-aside .sticky{position:sticky; top:96px; background:linear-gradient(180deg,#10203d,#0c1931);border:1px solid rgba(255,255,255,.08);border-radius:var(--radius);padding:1rem;box-shadow:var(--shadow)}
        .secure{margin-top:1rem;color:#a6e3c7}

        /* Skip link */
        .skip-link{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}
        .skip-link:focus{left:1rem;top:1rem;width:auto;height:auto;background:#fff;color:#111;padding:.5rem .75rem;border-radius:.5rem;z-index:1000}

        /* Responsive */
        @media (max-width: 900px){
          .grid-3{grid-template-columns:1fr}
          .two-col, .hero-inner, .donate-grid{grid-template-columns:1fr}
          .amount-options{grid-template-columns:repeat(2,1fr)}
          .footer-grid{grid-template-columns:1fr}
          .site-nav{display:none;position:absolute;right:1rem;top:62px;background:#0b1526;border:1px solid rgba(255,255,255,.08);border-radius:var(--radius);padding:.5rem;box-shadow:var(--shadow)}
          .site-nav.open{display:block}
          .site-nav ul{flex-direction:column;align-items:stretch}
          .site-nav a{padding:.65rem .8rem}
          .nav-toggle{display:inline-block}
        }
    </style>
</head>
<body>
<!-- Skip link for accessibility -->
<a class="skip-link" href="#main">Skip to content</a>

<header class="site-header">
    <div class="container header-inner">
        <a class="brand" href="index.html" aria-label="Home">
            <svg class="brand-mark" viewBox="0 0 48 48" aria-hidden="true"><circle cx="24" cy="24" r="24"/></svg>
            <span class="brand-text">WaterAid</span>
        </a>

        <button class="nav-toggle" aria-expanded="false" aria-controls="site-nav">
            <span class="sr-only">Toggle navigation</span>
            <div class="bar"></div><div class="bar"></div><div class="bar"></div>
        </button>

        <nav id="site-nav" class="site-nav" aria-label="Primary">
            <ul>
                <li><a href="#mission">Mission</a></li>
                <li><a href="#programs">Programs</a></li>
                <li><a href="#impact">Impact</a></li>
                <li><a href="#stories">Stories</a></li>
                <li><a class="btn btn--primary" href="#donate">Donate</a></li>
            </ul>
        </nav>
    </div>
</header>

<main id="main">
    <section class="hero">
        <div class="container hero-inner">
            <div class="hero-text">
                <h1>Clean water. Healthy lives. Brighter futures.</h1>
                <p>We work so every person can access clean water, decent toilets, and good hygiene—today and for generations.</p>
                <div class="cta-row">
                    <a class="btn btn--primary" href="#donate">Donate now</a>
                    <a class="btn btn--ghost" href="#mission">Learn more</a>
                </div>
            </div>
            <div class="hero-card" role="img" aria-label="Illustration of water access">
                <div class="hero-badge">100% Impact</div>
                <p class="hero-card-title">Your support funds sustainable water solutions in communities that need them most.</p>
                <ul class="hero-points">
                    <li>Community-led systems</li>
                    <li>Local maintenance training</li>
                    <li>Hygiene education</li>
                </ul>
            </div>
        </div>
    </section>

    <section id="mission" class="section">
        <div class="container two-col">
            <div>
                <h2>Our mission</h2>
                <p>We partner with communities, governments, and local organizations to design water systems that last. From rainwater harvesting and handpumps to piped networks, our projects are built for resilience.</p>
                <ul class="checklist">
                    <li>Locally owned and maintained</li>
                    <li>Climate-resilient designs</li>
                    <li>Women and youth leadership</li>
                </ul>
            </div>
            <div class="media-card">
                <img src="https://images.unsplash.com/photo-1509099836639-18ba1795216d?q=80&w=1600&auto=format&fit=crop" alt="Community collecting clean water in rural area">
            </div>
        </div>
    </section>

    <section id="programs" class="section section--muted">
        <div class="container">
            <h2 class="section-title">What we do</h2>
            <div class="grid-3">
                <article class="card">
                    <h3>Water access</h3>
                    <p>Safe water points, reliable pumps, and piped systems designed with the community.</p>
                    <a class="link" href="#">Explore projects →</a>
                </article>
                <article class="card">
                    <h3>Sanitation</h3>
                    <p>Toilets that are affordable, accessible, and dignified for households and schools.</p>
                    <a class="link" href="#">See our approach →</a>
                </article>
                <article class="card">
                    <h3>Hygiene</h3>
                    <p>Behavior change programs that improve handwashing and menstrual hygiene practices.</p>
                    <a class="link" href="#">Read more →</a>
                </article>
            </div>
        </div>
    </section>

    <section id="impact" class="section">
        <div class="container">
            <h2 class="section-title">Your impact</h2>
            <div class="stats">
                <div class="stat">
                    <div class="stat-number" data-count-to="1200">0</div>
                    <div class="stat-label">communities reached</div>
                </div>
                <div class="stat">
                    <div class="stat-number" data-count-to="5">0</div>
                    <div class="stat-label">countries of focus</div>
                </div>
                <div class="stat">
                    <div class="stat-number" data-count-to="98">0</div>
                    <div class="stat-label">% projects still running after 5 years</div>
                </div>
            </div>
        </div>
    </section>

    <section id="stories" class="section section--muted">
        <div class="container">
            <h2 class="section-title">Stories from the field</h2>
            <div class="grid-3">
                <article class="story">
                    <img src="https://images.unsplash.com/photo-1563986768494-4dee2763ff3f?q=80&w=1600&auto=format&fit=crop" alt="Village water point">
                    <div class="story-body">
                        <h3>“Now our children are healthy.”</h3>
                        <p>A new gravity-fed system brings water to homes in a hillside village for the first time.</p>
                        <a class="link" href="#">Read the story →</a>
                    </div>
                </article>
                <article class="story">
                    <img src="https://images.unsplash.com/photo-1529156069898-49953e39b3ac?q=80&w=1600&auto=format&fit=crop" alt="Handwashing station at school">
                    <div class="story-body">
                        <h3>Hygiene at school</h3>
                        <p>Simple handwashing stations keep classrooms open and students learning.</p>
                        <a class="link" href="#">See how →</a>
                    </div>
                </article>
                <article class="story">
                    <img src="https://images.unsplash.com/photo-1509099836639-18ba1795216d?q=80&w=1600&auto=format&fit=crop" alt="Community meeting">
                    <div class="story-body">
                        <h3>Women leading change</h3>
                        <p>Maintenance committees led by women boost reliability and safety.</p>
                        <a class="link" href="#">Meet the leaders →</a>
                    </div>
                </article>
            </div>
        </div>
    </section>

    <section class="section cta">
        <div class="container cta-inner">
            <h2>Be the reason a village turns on a tap.</h2>
            <a class="btn btn--primary btn--lg" href="#donate">Donate to Jagannath Donation</a>
        </div>
    </section>

    <!-- Donate Section (the same structure you provided, with script integration) -->
    <section class="donate-hero" id="donate">
        <div class="container">
            <h1>Jagannath Donation</h1>
            <p>Your gift helps bring clean water, decent toilets and good hygiene to communities in need.</p>
        </div>
    </section>

    <section class="section">
        <div class="container donate-grid">
            <form id="donation-form" class="donation-form" novalidate>
                <fieldset class="amounts">
                    <legend>Choose an amount</legend>
                    <div class="amount-options">
                        <input type="radio" id="amt-500" name="amount" value="500">
                        <label for="amt-500">₹500</label>

                        <input type="radio" id="amt-1000" name="amount" value="1000" checked>
                        <label for="amt-1000">₹1,000</label>

                        <input type="radio" id="amt-2500" name="amount" value="2500">
                        <label for="amt-2500">₹2,500</label>

                        <input type="radio" id="amt-5000" name="amount" value="5000">
                        <label for="amt-5000">₹5,000</label>
                    </div>

                    <label class="custom-amount">
                        Or enter a custom amount
                        <input type="number" min="100" step="50" placeholder="₹ Custom" name="customAmount" id="customAmount" />
                    </label>
                </fieldset>

                <fieldset class="donor-info">
                    <legend>Your details</legend>
                    <label>Full name
                        <input name="name" id="name" type="text" placeholder="Your full name" required>
                    </label>
                    <label>Email
                        <input name="email" id="email" type="email" placeholder="you@example.com" required>
                    </label>
                    <label>Phone (optional)
                        <input name="phone" id="phone" type="tel" placeholder="+91 98XXXXXXX">
                    </label>
                </fieldset>

<!--                <fieldset class="payment-methods">-->
<!--                    <legend>Payment method</legend>-->
<!--                    <label class="radio">-->
<!--                        <input type="radio" name="payment" value="upi" checked>-->
<!--                        <span>UPI</span>-->
<!--                    </label>-->
<!--                    <label class="radio">-->
<!--                        <input type="radio" name="payment" value="card">-->
<!--                        <span>Card</span>-->
<!--                    </label>-->
<!--                    <div class="payment-hint">-->
<!--                        This is a demo form. Connect to your gateway (Razorpay/Stripe/PayU) in <code>script.js</code>.-->
<!--                    </div>-->
<!--                </fieldset>-->

                <label class="checkbox">
                    <input type="checkbox" name="terms" id="terms" required>
                    <span>I agree to the terms and privacy policy.</span>
                </label>

                <button class="btn btn--primary btn--lg" type="submit">Donate securely</button>
                <p id="donation-message" role="status" aria-live="polite" class="form-message" hidden></p>
            </form>

            <aside class="donate-aside">
                <div class="sticky">
                    <h2>Your donation does this</h2>
                    <ul class="checklist">
                        <li>Funds sustainable water systems</li>
                        <li>Builds school handwashing stations</li>
                        <li>Trains local maintenance teams</li>
                    </ul>
                    <div class="secure">
                        <span aria-hidden="true">🔒</span> 256-bit SSL encrypted
                    </div>
                </div>
            </aside>
        </div>
    </section>
</main>

<footer class="site-footer">
    <div class="container footer-grid">
        <div>
            <h4>About</h4>
            <ul>
                <li><a href="#mission">Our mission</a></li>
                <li><a href="#programs">Programs</a></li>
                <li><a href="#impact">Impact</a></li>
            </ul>
        </div>
        <div>
            <h4>Get involved</h4>
            <ul>
                <li><a href="#donate">Donate</a></li>
                <li><a href="#">Fundraise</a></li>
                <li><a href="#">Partner with us</a></li>
            </ul>
        </div>
        <div>
            <h4>Contact</h4>
            <ul>
                <li><a href="mailto:hello@example.org">hello@example.org</a></li>
                <li><a href="tel:+911234567890">+91 12345 67890</a></li>
                <li><a href="#">Follow on social</a></li>
            </ul>
        </div>
    </div>
    <div class="container footer-bottom">
        <p>© <span id="year"></span> Jagannath Donation. Demo site for learning purposes.</p>
    </div>
</footer>

<script>
    // NAV TOGGLE
    const navToggle = document.querySelector('.nav-toggle');
    const nav = document.querySelector('#site-nav');
    if (navToggle && nav) {
      navToggle.addEventListener('click', () => {
        const open = nav.classList.toggle('open');
        navToggle.setAttribute('aria-expanded', String(open));
      });
    }

    // Year in footer
    const yearEl = document.querySelector('#year');
    if (yearEl) yearEl.textContent = new Date().getFullYear();

    // Count-up stats on scroll
    function animateCount(el){
      const target = Number(el.getAttribute('data-count-to') || 0);
      const duration = 1200;
      const start = performance.now();
      function tick(now){
        const p = Math.min(1, (now - start) / duration);
        const value = Math.floor(target * (0.5 - Math.cos(Math.PI * p)/2));
        el.textContent = value.toLocaleString();
        if (p < 1) requestAnimationFrame(tick);
      }
      requestAnimationFrame(tick);
    }

    const statEls = document.querySelectorAll('.stat-number');
    let counted = false;
    function onScroll(){
      if (counted) return;
      const trigger = window.scrollY + window.innerHeight;
      statEls.forEach(el => {
        if (el.getBoundingClientRect().top + window.scrollY < trigger) {
          animateCount(el);
          counted = true;
        }
      });
    }
    window.addEventListener('scroll', onScroll);
    onScroll();

    // Stripe & Donation form handler
    // <-- REPLACE publishable key below with your Stripe publishable key -->
    const stripe = Stripe("pk_test_51S24upGtj0YArOQyQhG3yQP4XDgj6nSu3MQ0xPwXgFmslIUWXuXCpfH3aF2TaK32WhvH2TXv9K0uV27JID0cjjeA00Kaje5NMi");

    const form = document.getElementById('donation-form');
    if (form) {
      form.addEventListener('submit', async (e) => {
        e.preventDefault();

        const fd = new FormData(form);
        // get selected radio amount (INR)
        const selectedRadio = form.querySelector('input[name="amount"]:checked');
        let amount = Number(selectedRadio ? selectedRadio.value : 0);
        const custom = Number(fd.get('customAmount') || 0);
        if (custom && custom > 0) amount = custom;

        const name = String(fd.get('name') || '').trim();
        const email = String(fd.get('email') || '').trim();
        const agreed = fd.get('terms') === 'on';

        const msgEl = document.getElementById('donation-message');

        if (!amount || amount < 100) {
          msgEl.hidden = false;
          msgEl.textContent = 'Please choose or enter an amount of at least ₹100.';
          return;
        }
        if (!name || !email || !agreed) {
          msgEl.hidden = false;
          msgEl.textContent = 'Please complete your details and accept the terms.';
          return;
        }

        // convert rupees to paise for Stripe
        const amountInPaise = Math.round(amount * 100);

        // build request body consistent with backend DTO
        const donationRequest = {
          donorName: name,
          email: email,
          amount: amountInPaise,
          currency: "inr"
        };

        try {
          msgEl.hidden = false;
          msgEl.textContent = 'Creating secure payment session…';

          const res = await fetch("http://localhost:8080/donation/checkout", {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify(donationRequest)
          });

          if (!res.ok) {
            const txt = await res.text();
            msgEl.textContent = `Server error: ${res.status} ${txt}`;
            return;
          }

          const stripeResponse = await res.json();

          if (stripeResponse && stripeResponse.sessionId) {
            // redirect to Stripe Checkout
            msgEl.textContent = 'Redirecting to payment…';
            const result = await stripe.redirectToCheckout({ sessionId: stripeResponse.sessionId });
            if (result.error) {
              msgEl.textContent = result.error.message || 'Stripe redirect failed.';
              console.error(result.error);
            }
          } else if (stripeResponse && stripeResponse.sessionUrl) {
            // fallback: some server implementations return sessionUrl
            window.location.href = stripeResponse.sessionUrl;
          } else {
            msgEl.textContent = 'Failed to create payment session: ' + (stripeResponse.message || 'Unknown error');
            console.error('StripeResponse', stripeResponse);
          }
        } catch (err) {
          console.error(err);
          msgEl.hidden = false;
          msgEl.textContent = 'Error creating payment session. See console for details.';
        }
      });
    }
</script>
</body>
</html>